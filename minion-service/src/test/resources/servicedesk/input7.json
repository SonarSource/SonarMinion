{"description": "Hi,\r\n\r\nWe are upgrading to SonarQube 7.0 from SonarQube 6.3. But after the database migration setup, the server does not start and fails with error:\r\n2018.03.18 22:42:50 ERROR web[][o.s.s.p.Platform] Background initialization failed. Stopping SonarQube\r\njava.lang.IllegalStateException: Unrecoverable indexation failures\r\nat org.sonar.server.es.IndexingListener$1.onFinish(IndexingListener.java:39)\r\nat org.sonar.server.es.BulkIndexer.stop(BulkIndexer.java:117)\r\nat org.sonar.server.rule.index.RuleIndexer.indexOnStartup(RuleIndexer.java:90)\r\n\r\nAll logs are attached herewith for your review.\r\n\r\nDeleting the data\/es5 folder does not help. Though after multiple re-tries for no particular reason, after the deletion of data\/es5, the server does start. Once the server is started successfully, subsequent restarts are successful.\r\n\r\nWe are in process of migration from 6.3 -> 7.0, so we have to upgrade the database multiple times and there is no guarantee that after the DB upgrade the server will startup successfully. There were warnings about max file descriptors and vm.max_map_count in the es.log which we have fixed by setting the vm.max_map_count and ulimit appropriately so as you can see in the logs the warnings are not logged anymore.\r\n\r\nI was also seeing \"segment writing can't keep up\" messages in es.log, which I got rid by increasing heap to 8G (-Xmx8G and -Xms8G).\r\n\r\nThere is also lot of free space available in data directory:",
  "component": "SonarQube",
  "component_version": "7.0"
}