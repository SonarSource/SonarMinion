{"description":"When the query used for the prepared statement is in another file, the rule fail with a NPE. Root cause: {{PreparedStatementAndResultSetCheck}} on line {{123}}. Getting the declaration of a symbol outside currently analyzed file returns {{null}}. Return value is not checked.\r\n\r\nReproducer:\r\n{code:title\u003dExtendedClass.java}\r\npackage sonar.testcase;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\n\r\npublic class ExtendedClass extends BaseClass {\r\n\r\n    protected void prepareReport(Connection connection) throws Exception {\r\n        try {\r\n            String sql \u003d SQL_QUERY_BASE;\r\n            PreparedStatement pstmt \u003d connection.prepareStatement(sql);\r\n            pstmt.setString(1, \"smth\"); \r\n        } catch (Exception e) {}\r\n    }\r\n}\r\n{code}\r\n\r\n{code:title\u003dBaseClass.java}\r\npackage sonar.testcase;\r\n\r\npublic class BaseClass {\r\n    public static final String SQL_QUERY_BASE \u003d \"select * from MYTABLE where customerId \u003d ?\"; // Declaration can not be retrieved when analyzing ExtendedClass.java\r\n}\r\n{code}\r\n\r\nOriginal thread from SQ google group: https://groups.google.com/d/msgid/sonarqube/1cf433a1-fd19-454e-93f4-9de1cb32815b%40googlegroups.com","component":"SonarJava","component_version":"3.6"}