{"description":"When method has exceptional yield where exception type is anonymous class and this yield is used in another method, we will attempt to resolve this anonymous exception type from bytecode, which fails with {{IllegalStateException}}. \r\n\r\nThis can be reproduced when following snippet is analyzed with the compiled anonymous exception available in the classpath\r\n\r\n{code}\r\nclass TestSupertypeResolution {\r\n  private void test() throws Exception {\r\n    throw new Exception() {};\r\n  }\r\n\r\n  void call() throws Exception {\r\n    test();\r\n  }\r\n}\r\n{code}\r\n\r\nFollowing is the stacktrace\r\n\r\n{code}\r\nCaused by: java.lang.IllegalStateException\r\n\tat org.sonar.java.resolve.BytecodeVisitor.visitOuterClass(BytecodeVisitor.java:128)\r\n\tat org.objectweb.asm.ClassReader.accept(ClassReader.java:648)\r\n\tat org.objectweb.asm.ClassReader.accept(ClassReader.java:521)\r\n\tat org.sonar.java.resolve.BytecodeCompleter.complete(BytecodeCompleter.java:80)\r\n\tat org.sonar.java.resolve.JavaSymbol.complete(JavaSymbol.java:110)\r\n\tat org.sonar.java.resolve.JavaSymbol$TypeJavaSymbol.getSuperclass(JavaSymbol.java:356)\r\n\tat org.sonar.java.resolve.JavaSymbol$TypeJavaSymbol.superClass(JavaSymbol.java:450)\r\n\tat org.sonar.java.resolve.JavaSymbol$TypeJavaSymbol.superTypes(JavaSymbol.java:417)\r\n\tat org.sonar.java.resolve.ClassJavaType.superTypeContains(ClassJavaType.java:85)\r\n\tat org.sonar.java.resolve.ClassJavaType.isSubtypeOf(ClassJavaType.java:57)\r\n\tat org.sonar.java.se.ProgramState.exitingOnRuntimeException(ProgramState.java:537)\r\n\tat org.sonar.java.se.checks.UnclosedResourcesCheck.checkEndOfExecutionPath(UnclosedResourcesCheck.java:150)\r\n\tat org.sonar.java.se.CheckerDispatcher.executeCheckEndOfExecutionPath(CheckerDispatcher.java:141)\r\n\tat org.sonar.java.se.ExplodedGraphWalker.lambda$handleEndOfExecutionPath$0(ExplodedGraphWalker.java:314)\r\n\tat java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat org.sonar.java.se.ExplodedGraphWalker.handleEndOfExecutionPath(ExplodedGraphWalker.java:312)\r\n\tat org.sonar.java.se.ExplodedGraphWalker.execute(ExplodedGraphWalker.java:266)\r\n{code}","component":"SonarJava","component_version":"5.3"}