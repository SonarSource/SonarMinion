{"description":"Original thread in SOF: http://stackoverflow.com/questions/30484158/sonarqube-analysis-failure-after-java-plugin-upgrade-3-2-3-3\r\n\r\nThe rule {{StringToStringCheck}} can in case of a method returning an array of String trigger a ClassCastException\r\n{code}\r\nString[] foo() {}\r\nfoo()[0].toString(); // ClassCastException\r\n{code}\r\nAssociated stacktrace:\r\n{code}\r\n13:59:10 [ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.6:sonar (default-cli) on project ingbol: SonarQube is unable to analyze file : \u0027/var/lib/jenkins/workspace/ing_trunk_sonar/sources/cib-actions/src/main/java/com/company/cib/corpo/struts/actions/IngCcsRightsAction.java\u0027: org.sonar.java.model.expression.MethodInvocationTreeImpl cannot be cast to org.sonar.plugins.java.api.tree.IdentifierTree -\u003e [Help 1]\r\n    13:59:10 org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.6:sonar (default-cli) on project ingbol: SonarQube is unable to analyze file : \u0027/var/lib/jenkins/workspace/ing_trunk_sonar/sources/cib-actions/src/main/java/com/company/cib/corpo/struts/actions/IngCcsRightsAction.java\u0027\r\n    13:59:10    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)\r\n    13:59:10    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\r\n    13:59:10    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\r\n    13:59:10    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)\r\n    13:59:10    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)\r\n    13:59:10    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\r\n    13:59:10    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:120)\r\n    13:59:10    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:355)\r\n    13:59:10    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:155)\r\n    13:59:10    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:584)\r\n    13:59:10    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:216)\r\n    13:59:10    at org.apache.maven.cli.MavenCli.main(MavenCli.java:160)\r\n    13:59:10    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    13:59:10    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    13:59:10    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    13:59:10    at java.lang.reflect.Method.invoke(Method.java:497)\r\n    13:59:10    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\r\n    13:59:10    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\r\n    13:59:10    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\r\n    13:59:10    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\r\n    13:59:10 Caused by: org.apache.maven.plugin.MojoExecutionException: SonarQube is unable to analyze file : \u0027/var/lib/jenkins/workspace/ing_trunk_sonar/sources/cib-actions/src/main/java/com/company/cib/corpo/struts/actions/IngCcsRightsAction.java\u0027\r\n    13:59:10    at org.codehaus.mojo.sonar.bootstrap.ExceptionHandling.handle(ExceptionHandling.java:41)\r\n    13:59:10    at org.codehaus.mojo.sonar.bootstrap.RunnerBootstraper.execute(RunnerBootstraper.java:139)\r\n    13:59:10    at org.codehaus.mojo.sonar.SonarMojo.execute(SonarMojo.java:132)\r\n    13:59:10    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)\r\n    13:59:10    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)\r\n    13:59:10    ... 19 more\r\n    13:59:10 Caused by: org.sonar.squidbridge.api.AnalysisException: SonarQube is unable to analyze file : \u0027/var/lib/jenkins/workspace/ing_trunk_sonar/sources/cib-actions/src/main/java/com/company/cib/corpo/struts/actions/IngCcsRightsAction.java\u0027\r\n    13:59:10    at org.sonar.java.ast.AstScanner.simpleScan(AstScanner.java:114)\r\n    13:59:10    at org.sonar.java.ast.AstScanner.scan(AstScanner.java:75)\r\n    13:59:10    at org.sonar.java.JavaSquid.scanSources(JavaSquid.java:132)\r\n    13:59:10    at org.sonar.java.JavaSquid.scan(JavaSquid.java:125)\r\n    13:59:10    at org.sonar.plugins.java.JavaSquidSensor.analyse(JavaSquidSensor.java:86)\r\n    13:59:10    at org.sonar.batch.phases.SensorsExecutor.executeSensor(SensorsExecutor.java:59)\r\n    13:59:10    at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:51)\r\n    13:59:10    at org.sonar.batch.phases.DatabaseModePhaseExecutor.execute(DatabaseModePhaseExecutor.java:120)\r\n    13:59:10    at org.sonar.batch.scan.ModuleScanContainer.doAfterStart(ModuleScanContainer.java:264)\r\n    13:59:10    at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:92)\r\n    13:59:10    at org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:77)\r\n    13:59:10    at org.sonar.batch.scan.ProjectScanContainer.scan(ProjectScanContainer.java:235)\r\n    13:59:10    at org.sonar.batch.scan.ProjectScanContainer.scanRecursively(ProjectScanContainer.java:230)\r\n    13:59:10    at org.sonar.batch.scan.ProjectScanContainer.scanRecursively(ProjectScanContainer.java:228)\r\n    13:59:10    at org.sonar.batch.scan.ProjectScanContainer.doAfterStart(ProjectScanContainer.java:220)\r\n    13:59:10    at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:92)\r\n    13:59:10    at org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:77)\r\n    13:59:10    at org.sonar.batch.scan.ScanTask.scan(ScanTask.java:57)\r\n    13:59:10    at org.sonar.batch.scan.ScanTask.execute(ScanTask.java:45)\r\n    13:59:10    at org.sonar.batch.bootstrap.TaskContainer.doAfterStart(TaskContainer.java:135)\r\n    13:59:10    at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:92)\r\n    13:59:10    at org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:77)\r\n    13:59:10    at org.sonar.batch.bootstrap.GlobalContainer.executeTask(GlobalContainer.java:158)\r\n    13:59:10    at org.sonar.batch.bootstrapper.Batch.executeTask(Batch.java:95)\r\n    13:59:10    at org.sonar.batch.bootstrapper.Batch.execute(Batch.java:67)\r\n    13:59:10    at org.sonar.runner.batch.IsolatedLauncher.execute(IsolatedLauncher.java:48)\r\n    13:59:10    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    13:59:10    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    13:59:10    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    13:59:10    at java.lang.reflect.Method.invoke(Method.java:497)\r\n    13:59:10    at org.sonar.runner.impl.BatchLauncher$1.delegateExecution(BatchLauncher.java:87)\r\n    13:59:10    at org.sonar.runner.impl.BatchLauncher$1.run(BatchLauncher.java:75)\r\n    13:59:10    at java.security.AccessController.doPrivileged(Native Method)\r\n    13:59:10    at org.sonar.runner.impl.BatchLauncher.doExecute(BatchLauncher.java:69)\r\n    13:59:10    at org.sonar.runner.impl.BatchLauncher.execute(BatchLauncher.java:50)\r\n    13:59:10    at org.sonar.runner.api.EmbeddedRunner.doExecute(EmbeddedRunner.java:102)\r\n    13:59:10    at org.sonar.runner.api.Runner.execute(Runner.java:100)\r\n    13:59:10    at org.codehaus.mojo.sonar.bootstrap.RunnerBootstraper.execute(RunnerBootstraper.java:135)\r\n    13:59:10    ... 22 more\r\n    13:59:10 Caused by: java.lang.ClassCastException: org.sonar.java.model.expression.MethodInvocationTreeImpl cannot be cast to org.sonar.plugins.java.api.tree.IdentifierTree\r\n    13:59:10    at org.sonar.java.checks.StringToStringCheck.extractName(StringToStringCheck.java:92)\r\n    13:59:10    at org.sonar.java.checks.StringToStringCheck.onMethodFound(StringToStringCheck.java:71)\r\n    13:59:10    at org.sonar.java.checks.methods.AbstractMethodDetection.checkInvocation(AbstractMethodDetection.java:52)\r\n    13:59:10    at org.sonar.java.checks.methods.AbstractMethodDetection.visitNode(AbstractMethodDetection.java:43)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:94)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:112)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:96)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.scanTree(SubscriptionVisitor.java:72)\r\n    13:59:10    at org.sonar.java.ast.visitors.SubscriptionVisitor.scanFile(SubscriptionVisitor.java:66)\r\n    13:59:10    at org.sonar.java.checks.SubscriptionBaseVisitor.scanFile(SubscriptionBaseVisitor.java:33)\r\n    13:59:10    at org.sonar.java.model.VisitorsBridge.visitFile(VisitorsBridge.java:121)\r\n    13:59:10    at com.sonar.sslr.impl.ast.AstWalker.walkAndVisit(AstWalker.java:67)\r\n    13:59:10    at org.sonar.java.ast.AstScanner.simpleScan(AstScanner.java:107)\r\n    13:59:10    ... 59 more\r\n    13:59:10 [ERROR] \r\n    13:59:10 [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    13:59:10 [ERROR] \r\n    13:59:10 [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    13:59:10 [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n{code}\r\n\r\n","component":"SonarJava","component_version":"3.4"}