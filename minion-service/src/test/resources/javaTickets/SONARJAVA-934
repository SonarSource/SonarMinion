{"description":"Check triggers a ClassCastException when annotation is declared in the same compilation unit.\n\nFor instance in ZZZZ_COBERTURA_sqpersistit/src/main/java/com/persistit/CLI.java:\n{code}\n    @Retention(RetentionPolicy.RUNTIME)\n    @Target(ElementType.METHOD)\n    public @interface Cmd {\n        String value();\n    }\n{code}\n\nThe result is:\n\n{code}org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.5:sonar (default-cli) on project shindig-project: SonarQube is unable to analyze file : \u0027/scratch/jenkins/workspace/shindig_nemoisator/java/common/src/main/java/org/apache/shindig/expressions/Functions.java\u0027\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:108)\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:76)\n\tat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\n\tat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:116)\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:361)\n\tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:155)\n\tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:584)\n\tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:213)\n\tat org.apache.maven.cli.MavenCli.main(MavenCli.java:157)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\nCaused by: org.apache.maven.plugin.MojoExecutionException: SonarQube is unable to analyze file : \u0027/scratch/jenkins/workspace/shindig_nemoisator/java/common/src/main/java/org/apache/shindig/expressions/Functions.java\u0027\n\tat org.codehaus.mojo.sonar.bootstrap.ExceptionHandling.handle(ExceptionHandling.java:41)\n\tat org.codehaus.mojo.sonar.bootstrap.RunnerBootstraper.execute(RunnerBootstraper.java:139)\n\tat org.codehaus.mojo.sonar.SonarMojo.execute(SonarMojo.java:138)\n\tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:133)\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)\n\t... 19 more\nCaused by: org.sonar.squidbridge.api.AnalysisException: SonarQube is unable to analyze file : \u0027/scratch/jenkins/workspace/shindig_nemoisator/java/common/src/main/java/org/apache/shindig/expressions/Functions.java\u0027\n\tat org.sonar.java.ast.AstScanner.simpleScan(AstScanner.java:114)\n\tat org.sonar.java.ast.AstScanner.scan(AstScanner.java:75)\n\tat org.sonar.java.JavaSquid.scanSources(JavaSquid.java:122)\n\tat org.sonar.java.JavaSquid.scan(JavaSquid.java:115)\n\tat org.sonar.plugins.java.JavaSquidSensor.analyse(JavaSquidSensor.java:92)\n\tat org.sonar.batch.phases.SensorsExecutor.executeSensor(SensorsExecutor.java:59)\n\tat org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:51)\n\tat org.sonar.batch.phases.DatabaseModePhaseExecutor.execute(DatabaseModePhaseExecutor.java:120)\n\tat org.sonar.batch.scan.ModuleScanContainer.doAfterStart(ModuleScanContainer.java:264)\n\tat org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:92)\n\tat org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:77)\n\tat org.sonar.batch.scan.ProjectScanContainer.scan(ProjectScanContainer.java:235)\n\tat org.sonar.batch.scan.ProjectScanContainer.scanRecursively(ProjectScanContainer.java:230)\n\tat org.sonar.batch.scan.ProjectScanContainer.scanRecursively(ProjectScanContainer.java:228)\n\tat org.sonar.batch.scan.ProjectScanContainer.doAfterStart(ProjectScanContainer.java:220)\n\tat org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:92)\n\tat org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:77)\n\tat org.sonar.batch.scan.ScanTask.scan(ScanTask.java:57)\n\tat org.sonar.batch.scan.ScanTask.execute(ScanTask.java:45)\n\tat org.sonar.batch.bootstrap.TaskContainer.doAfterStart(TaskContainer.java:135)\n\tat org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:92)\n\tat org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:77)\n\tat org.sonar.batch.bootstrap.GlobalContainer.executeTask(GlobalContainer.java:158)\n\tat org.sonar.batch.bootstrapper.Batch.executeTask(Batch.java:95)\n\tat org.sonar.batch.bootstrapper.Batch.execute(Batch.java:67)\n\tat org.sonar.runner.batch.IsolatedLauncher.execute(IsolatedLauncher.java:48)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.sonar.runner.impl.BatchLauncher$1.delegateExecution(BatchLauncher.java:87)\n\tat org.sonar.runner.impl.BatchLauncher$1.run(BatchLauncher.java:75)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.sonar.runner.impl.BatchLauncher.doExecute(BatchLauncher.java:69)\n\tat org.sonar.runner.impl.BatchLauncher.execute(BatchLauncher.java:50)\n\tat org.sonar.runner.api.EmbeddedRunner.doExecute(EmbeddedRunner.java:102)\n\tat org.sonar.runner.api.Runner.execute(Runner.java:100)\n\tat org.codehaus.mojo.sonar.bootstrap.RunnerBootstraper.execute(RunnerBootstraper.java:135)\n\t... 22 more\nCaused by: java.lang.ClassCastException: org.sonar.java.model.expression.MemberSelectExpressionTreeImpl cannot be cast to org.sonar.java.resolve.Symbol$VariableSymbol\n\tat org.sonar.java.checks.ReflectionOnNonRuntimeAnnotationCheck.isNotRuntimeAnnotation(ReflectionOnNonRuntimeAnnotationCheck.java:75)\n\tat org.sonar.java.checks.ReflectionOnNonRuntimeAnnotationCheck.onMethodFound(ReflectionOnNonRuntimeAnnotationCheck.java:66)\n\tat org.sonar.java.checks.methods.AbstractMethodDetection.checkInvocation(AbstractMethodDetection.java:52)\n\tat org.sonar.java.checks.methods.AbstractMethodDetection.visitNode(AbstractMethodDetection.java:43)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:95)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:113)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:97)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:113)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:97)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:113)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:97)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:113)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:97)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:113)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:97)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.scanTree(SubscriptionVisitor.java:73)\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.scanFile(SubscriptionVisitor.java:67)\n\tat org.sonar.java.model.VisitorsBridge.visitFile(VisitorsBridge.java:122)\n\tat com.sonar.sslr.impl.ast.AstWalker.walkAndVisit(AstWalker.java:67)\n\tat org.sonar.java.ast.AstScanner.simpleScan(AstScanner.java:107)\n\t... 59 more{code}","component":"SonarJava","component_version":"3.1"}