{"description":"The analysis of the following code trigger a NPE and makes the analysis fail:\r\n\r\n{code}\r\nimport java.util.HashMap;\r\n\r\nenum A {\r\n  VALUE_1(1),\r\n  VALUE_2(2);\r\n\r\n  static class Inner {\r\n    private static HashMap\u003cInteger, A\u003e INDEX \u003d new HashMap\u003c\u003e();\r\n  }\r\n\r\n  A(int indexValue) {\r\n    Inner.INDEX.put(indexValue, this);\r\n  }\r\n\r\n  public static A lookup(int indexValue) {\r\n    return Inner.INDEX.get(indexValue);\r\n  }\r\n}\r\n{code}\r\n\r\nWith the following stacktrace:\r\n{code}\r\nCaused by: java.lang.NullPointerException\r\n\tat org.sonar.java.checks.PrivateFieldUsedLocallyCheck.containingClassOrMethod(PrivateFieldUsedLocallyCheck.java:122)\r\n\tat org.sonar.java.checks.PrivateFieldUsedLocallyCheck.usedInOneMethodOnly(PrivateFieldUsedLocallyCheck.java:102)\r\n\tat org.sonar.java.checks.PrivateFieldUsedLocallyCheck.checkPrivateField(PrivateFieldUsedLocallyCheck.java:75)\r\n\tat org.sonar.java.checks.PrivateFieldUsedLocallyCheck.lambda$visitNode$4(PrivateFieldUsedLocallyCheck.java:67)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.sonar.java.checks.PrivateFieldUsedLocallyCheck.visitNode(PrivateFieldUsedLocallyCheck.java:67)\r\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:95)\r\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:120)\r\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:97)\r\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visitChildren(SubscriptionVisitor.java:120)\r\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.visit(SubscriptionVisitor.java:97)\r\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.scanTree(SubscriptionVisitor.java:78)\r\n\tat org.sonar.java.ast.visitors.SubscriptionVisitor.scanFile(SubscriptionVisitor.java:64)\r\n\tat org.sonar.java.model.VisitorsBridge.visitFile(VisitorsBridge.java:121)\r\n\tat org.sonar.java.ast.JavaAstScanner.simpleScan(JavaAstScanner.java:84)\r\n\t... 54 more\r\n{code}","component":"SonarJava","component_version":"4.5"}